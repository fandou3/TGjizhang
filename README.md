# 电报记账机器人使用说明

## 测试机器人  @all_dai_bot

备注：本人接Web3，TG电报 等脚本定做开发。 
频道： @lumaozhushou 
社区： @ScriptFreedomGroup 

机器人： @all_dai_bot

## 基本功能

### 记账功能
1. 入款记录
   - 命令格式：`+金额`
   - 示例：`+100`
   - 权限要求：操作人、权限人或管理员
   - 说明：记录人民币入款，系统会自动根据当前汇率换算USDT金额

2. 下发记录
   - 命令格式：`下发金额`
   - 示例：`下发10`
   - 权限要求：操作人、权限人或管理员
   - 说明：记录USDT下发金额，系统会自动根据当前汇率换算人民币金额

### 账单管理
1. 显示账单
   - 命令：`显示账单`
   - 权限要求：操作人、权限人或管理员
   - 说明：显示当前未保存的账单记录

2. 保存账单
   - 命令：`保存账单`
   - 权限要求：权限人或管理员
   - 说明：保存当前账单，保存后的记录不会在常规显示中出现，但可以通过导出Excel查看

3. 删除账单
   - 命令：`删除账单`
   - 权限要求：权限人或管理员
   - 说明：删除今日未保存的账单

4. 删除所有账单
   - 命令：`删除所有账单`
   - 权限要求：权限人或管理员
   - 说明：删除所有历史账单（谨慎使用）

### 课程管理
1. 开始上课
   - 命令：`开始` 或 `上课`
   - 权限要求：管理员
   - 说明：开始记账课程，只有在上课状态才能记账

2. 结束下课
   - 命令：`停止` 或 `下课`
   - 权限要求：权限人或管理员
   - 说明：结束记账课程，系统会自动保存当前账单

### 设置功能
1. 设置汇率
   - 命令格式：`设置汇率 数字`
   - 示例：`设置汇率 7.2`
   - 权限要求：管理员
   - 说明：设置当前汇率，支持小数点

2. 设置费率
   - 命令格式：`设置费率 数字`
   - 示例：`设置费率 5`
   - 权限要求：管理员
   - 说明：设置手续费率（百分比），支持小数点

### 权限管理
1. 设置操作人
   - 命令格式：`设置操作人 @用户名`
   - 权限要求：权限人或管理员
   - 说明：添加普通操作人，可以记账和查看账单

2. 新增权限人
   - 命令格式：`新增权限人 @用户名`
   - 权限要求：管理员
   - 说明：添加权限操作人，可以管理账单和操作人

3. 删除操作人
   - 命令格式：`删除操作人 @用户名`
   - 权限要求：权限人或管理员
   - 说明：删除普通操作人

4. 删除权限人
   - 命令格式：`删除权限人 @用户名`
   - 权限要求：管理员
   - 说明：删除权限人（不能删除最后一个权限人）

5. 显示操作人
   - 命令：`显示操作人`
   - 权限要求：操作人、权限人或管理员
   - 说明：显示所有操作人和权限人列表

### 其他功能
1. 导出账单
   - 方式：点击账单显示中的"查看完整账单"按钮
   - 权限要求：操作人、权限人或管理员
   - 说明：导出Excel格式的完整账单，包含所有历史记录

## 权限说明

### 1. 普通操作人权限
- 可以记账（入款和下发）
- 可以查看当前账单
- 可以查看操作人列表
- 可以导出账单
- 不能删除或保存账单
- 不能管理其他操作人

### 2. 权限人权限
- 包含所有操作人的权限
- 可以删除账单
- 可以保存账单
- 可以添加/删除普通操作人
- 可以结束课程（下课）
- 不能设置汇率和费率
- 不能管理权限人

### 3. 管理员权限
- 包含所有权限人的权限
- 可以添加/删除权限人
- 可以设置汇率和费率
- 可以开始课程（上课）
- 可以添加其他管理员

## 使用流程

1. 开始记账：
   - 管理员输入"上课"开始课程
   - 操作人可以开始记账

2. 日常记账：
   - 使用"+金额"记录入款
   - 使用"下发金额"记录下发
   - 使用"显示账单"查看当前记录

3. 保存账单：
   - 权限人或管理员使用"保存账单"命令
   - 或者使用"下课"命令自动保存

4. 导出记录：
   - 点击"查看完整账单"导出Excel
   - Excel包含详细统计信息

## 注意事项

1. 账单管理：
   - 保存账单后，记录会从常规显示中隐藏
   - 但可以通过导出Excel查看所有历史记录
   - 删除账单操作不可恢复，请谨慎使用

2. 汇率和费率：
   - 更改汇率会影响后续记账
   - 费率设置范围为0-100

3. 权限管理：
   - 系统必须保留至少一个权限人
   - 建议设置多个权限人以防意外

4. 课程管理：
   - 只有在上课状态才能记账
   - 下课会自动保存当前账单 
